<div class="authorization">
    <form name="auth" action="register" method="POST">
        <div class="authorization-header col s6 center">
            Регистрация
        </div>
        <hr>
        <div class="input-field col s6">
        <label class="white-text" for="login">Login:</label>
        <input class="white-text validate" id="login" type="text" name="login" required onkeyup="checkLogin(this.value)">
        </div>

        <div class="input-field col s6">
            <label class="white-text" for="password">Password: </label>
            <input class="white-text validate" id="password" type="password" name="password" onkeyup="checkPassword(this.value)">
        </div>

        <div class="input-field col s6">
            <label class="white-text" for="password">Repeat password: </label>
            <input class="white-text validate" id="repeat" type="password" name="repeat" onkeyup="checkRepeat(this.value)">
        </div>

        <div id="serving">
            <p id="errorInput"></p>
            <p id="error"></p>
        </div>

        <input type="hidden" name="inputHide" />
        <button class="btn waves-effect waves-light" type="button" name="sign" value="SIGN UP" onclick="{document.auth.inputHide.value=this.value;document.auth.submit();}">
            SIGN UP
            <i class="material-icons right">send</i>
        </button>

    </form>
    <hr>
    <a class="white-text center" href="http://localhost:5000/auth/login" style="color: black"> Вы уже зарегистрированы?</a>
</div>

<script>
    let login = false;
    let password = false;

    function showPassword()
    {
        let show = document.getElementById("showPassword");
        show.onchange = function() {
            if(this.checked) {
                document.getElementById("password").setAttribute("type", "text");
            }else {
                document.getElementById("password").setAttribute("type", "password");
            }
        }
    }


    function checkLogin(str)
    {
        if(str.length < 4)
        {
            document.getElementById("errorInput").innerHTML = "Login must be more than 4 characters";
            document.getElementsByName("login")[0].style.borderColor = "red";
            login = false;
        }
        else
        {
            document.getElementById("errorInput").innerHTML = "";
            document.getElementsByName("login")[0].style.borderColor = "green";
            login = true;
        }
    }

    function checkEmail(str)
    {
        if (/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/gm.test(str))
        {   document.getElementById("errorInput").innerHTML = "";
            document.getElementsByName("mail")[0].style.borderColor = "green";
            login = true;
        }
        else
        {
            document.getElementById("errorInput").innerHTML = "Mail is not corrected";
            document.getElementsByName("mail")[0].style.borderColor = "red";
            login = false;
        }
    }
    function checkPassword(str) {
        if (str.length < 8) {
            document.getElementById("errorInput").innerHTML = "Password must be more than 8 characters";
            document.getElementsByName("password")[0].style.borderColor = "red";
            password = false;
            return;
        } else {
            document.getElementById("errorInput").innerHTML = "";
            document.getElementsByName("password")[0].style.borderColor = "green";
            password = true;
        }

        if (str !== document.getElementsByName("repeat")[0].value) {
            document.getElementById("errorInput").innerHTML = "Password not equals the password repeated";
            document.getElementsByName("password")[0].style.borderColor = "red";
            document.getElementsByName("repeat")[0].style.borderColor = "red";
        } else {
            document.getElementById("errorInput").innerHTML = "";
            document.getElementsByName("password")[0].style.borderColor = "green";
            document.getElementsByName("repeat")[0].style.borderColor = "green";
        }
    }
    function checkRepeat(str) {
        if (str.length < 8) {
            document.getElementById("errorInput").innerHTML = "Repeated must be more than 8 characters";
            document.getElementsByName("repeat")[0].style.borderColor = "red";
            password = false;
            return;
        } else {
            document.getElementById("errorInput").innerHTML = "";
            document.getElementsByName("repeat")[0].style.borderColor = "green";
            password = true;
        }

        if (str !== document.getElementsByName("password")[0].value) {
            document.getElementById("errorInput").innerHTML = "Repeated not equals the password repeated";
            document.getElementsByName("password")[0].style.borderColor = "red";
            document.getElementsByName("repeat")[0].style.borderColor = "red";
        } else {
            document.getElementById("errorInput").innerHTML = "";
            document.getElementsByName("password")[0].style.borderColor = "green";
            document.getElementsByName("repeat")[0].style.borderColor = "green";
        }
    }
</script>
